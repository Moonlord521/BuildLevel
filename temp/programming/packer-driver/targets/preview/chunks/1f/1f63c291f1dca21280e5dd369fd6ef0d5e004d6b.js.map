{"version":3,"sources":["file:///D:/CocosCreator/BuildLevel/assets/scripts/FirstPage.ts"],"names":["_decorator","Component","sys","ccclass","TotalLevel","FirstPage","onLoad","str","localStorage","getItem","LevelState","Array","i","setItem","JSON","stringify","parse","length","nLevelState","ClearData","removeItem","scene_name"],"mappings":";;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,G,OAAAA,G;;;;;;;;;OAC1B;AAAEC,QAAAA;AAAF,O,GAAcH,U;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEII,MAAAA,U,GAAa,G;;2BAGJC,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb,SAC+BJ,SAD/B,CACyC;AACrCK,QAAAA,MAAM,GAAG;AACL,cAAIC,GAAG,GAAGL,GAAG,CAACM,YAAJ,CAAiBC,OAAjB,CAAyB,YAAzB,CAAV;;AACA,cAAGF,GAAG,IAAI,EAAP,IAAaA,GAAG,IAAI,IAAvB,EAA6B;AACzB,gBAAIG,UAAU,GAAG,IAAIC,KAAJ,CAAmBP,UAAnB,CAAjB;;AACA,iBAAI,IAAIQ,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACR,UAAf,EAA2BQ,CAAC,EAA5B,EAAgC;AAC5BF,cAAAA,UAAU,CAACE,CAAD,CAAV,GAAgB,KAAhB;AACH;;AACDV,YAAAA,GAAG,CAACM,YAAJ,CAAiBK,OAAjB,CAAyB,YAAzB,EAAuCC,IAAI,CAACC,SAAL,CAAeL,UAAf,CAAvC;AACH,WAND,MAOK;AACD,gBAAIA,WAAoB,GAAGI,IAAI,CAACE,KAAL,CAAWT,GAAX,CAA3B;;AACA,gBAAGG,WAAU,CAACO,MAAX,GAAoBb,UAAvB,EAAmC;AAC/B,kBAAIc,WAAW,GAAG,IAAIP,KAAJ,CAAmBP,UAAnB,CAAlB;;AACA,mBAAI,IAAIQ,EAAC,GAAC,CAAV,EAAaA,EAAC,GAACR,UAAf,EAA2BQ,EAAC,EAA5B,EAAgC;AAC5B,oBAAGA,EAAC,GAAGF,WAAU,CAACO,MAAlB,EAA0BC,WAAW,CAACN,EAAD,CAAX,GAAiBF,WAAU,CAACE,EAAD,CAA3B,CAA1B,KACKM,WAAW,CAACN,EAAD,CAAX,GAAiB,KAAjB;AACR;;AACDV,cAAAA,GAAG,CAACM,YAAJ,CAAiBK,OAAjB,CAAyB,YAAzB,EAAuCC,IAAI,CAACC,SAAL,CAAeG,WAAf,CAAvC;AACH;AACJ;AACJ;;AAEDC,QAAAA,SAAS,GAAG;AACRjB,UAAAA,GAAG,CAACM,YAAJ,CAAiBY,UAAjB,CAA4B,YAA5B;AACA,cAAIV,UAAU,GAAG,IAAIC,KAAJ,CAAmBP,UAAnB,CAAjB;;AACA,eAAI,IAAIQ,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACR,UAAf,EAA2BQ,CAAC,EAA5B,EAAgC;AAC5BF,YAAAA,UAAU,CAACE,CAAD,CAAV,GAAgB,KAAhB;AACA,gBAAIS,UAAU,GAAG,WAAST,CAAC,GAAG,CAAb,CAAjB;AACAV,YAAAA,GAAG,CAACM,YAAJ,CAAiBY,UAAjB,CAA4BC,UAA5B;AACH;;AACDnB,UAAAA,GAAG,CAACM,YAAJ,CAAiBK,OAAjB,CAAyB,YAAzB,EAAuCC,IAAI,CAACC,SAAL,CAAeL,UAAf,CAAvC;AACH;;AAhCoC,O;AAmCzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Component, sys } from 'cc';\nconst { ccclass } = _decorator;\n\n/**\n * Predefined variables\n * Name = FirstPage\n * DateTime = Tue Nov 16 2021 15:47:03 GMT+0800 (中國標準時間)\n * Author = XieYe0920\n * FileBasename = FirstPage.ts\n * FileBasenameNoExtension = FirstPage\n * URL = db://assets/scripts/FirstPage.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n\nlet TotalLevel = 100;\n\n@ccclass('FirstPage')\nexport class FirstPage extends Component {\n    onLoad() {\n        let str = sys.localStorage.getItem('LevelState');\n        if(str == '' || str == null) {\n            let LevelState = new Array<boolean>(TotalLevel);\n            for(let i=0; i<TotalLevel; i++) {\n                LevelState[i] = false;\n            }\n            sys.localStorage.setItem('LevelState', JSON.stringify(LevelState));\n        }\n        else {\n            let LevelState:boolean[] = JSON.parse(str);\n            if(LevelState.length < TotalLevel) {\n                let nLevelState = new Array<boolean>(TotalLevel);\n                for(let i=0; i<TotalLevel; i++) {\n                    if(i < LevelState.length) nLevelState[i] = LevelState[i];\n                    else nLevelState[i] = false;\n                }\n                sys.localStorage.setItem('LevelState', JSON.stringify(nLevelState));\n            }\n        }\n    }\n\n    ClearData() {\n        sys.localStorage.removeItem('LevelState');\n        let LevelState = new Array<boolean>(TotalLevel);\n        for(let i=0; i<TotalLevel; i++) {\n            LevelState[i] = false;\n            let scene_name = 'Level'+(i + 1);\n            sys.localStorage.removeItem(scene_name);\n        }\n        sys.localStorage.setItem('LevelState', JSON.stringify(LevelState));\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}