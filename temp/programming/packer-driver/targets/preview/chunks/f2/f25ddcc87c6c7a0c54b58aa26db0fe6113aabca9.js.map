{"version":3,"sources":["file:///D:/CocosCreator/BuildLevel/assets/scripts/Light.ts"],"names":["_decorator","Component","MapInfo","matrix1","LightSource","ccclass","property","LS_array","Array","Light","id","squarex","squarey","onLoad","x","node","getPosition","y","xstart1","xend1","ystart1","yend1","Math","floor","totalsize","setRotationFromEuler","dir","setPosition","xshift1","yshift1","LS","red","green","blue","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;0BAEWO,Q,GAAyB,IAAIC,KAAJ,E;;uBAGvBC,K,WADZJ,OAAO,CAAC,OAAD,C,2BAAR,MACaI,KADb,SAC2BR,SAD3B,CACqC;AAAA;AAAA;AAAA,eACjCS,EADiC,GACrB,GADqB;;AAAA;;AAAA,eAI1BC,OAJ0B,GAIT,CAJS;AAAA,eAK1BC,OAL0B,GAKT,CALS;;AAAA;;AAAA;;AAAA;AAAA;;AAajCC,QAAAA,MAAM,GAAG;AACL,cAAIC,CAAQ,GAAG,KAAKC,IAAL,CAAUC,WAAV,GAAwBF,CAAvC;AACA,cAAIG,CAAQ,GAAG,KAAKF,IAAL,CAAUC,WAAV,GAAwBC,CAAvC;;AACA,cAAGH,CAAC,IAAE;AAAA;AAAA,kCAAQI,OAAR,EAAH,IAAwBJ,CAAC,IAAE;AAAA;AAAA,kCAAQK,KAAR,EAA3B,IAA8CF,CAAC,IAAE;AAAA;AAAA,kCAAQG,OAAR,EAAjD,IAAsEH,CAAC,IAAE;AAAA;AAAA,kCAAQI,KAAR,EAA5E,EAA4F;AACxF,iBAAKV,OAAL,GAAeW,IAAI,CAACC,KAAL,CAAW,CAACT,CAAC,GAAG;AAAA;AAAA,oCAAQI,OAAR,EAAL,IAAwB;AAAA;AAAA,oCAAQM,SAAR,EAAnC,CAAf;AACA,iBAAKZ,OAAL,GAAeU,IAAI,CAACC,KAAL,CAAW,CAACN,CAAC,GAAG;AAAA;AAAA,oCAAQG,OAAR,EAAL,IAAwB;AAAA;AAAA,oCAAQI,SAAR,EAAnC,CAAf;AACH;;AAED,eAAKT,IAAL,CAAUU,oBAAV,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,KAAKC,GAAL,GAAW,EAAhD;AACA,eAAKX,IAAL,CAAUY,WAAV,CAAsB,KAAKhB,OAAL,GAAa;AAAA;AAAA,kCAAQa,SAAR,EAAb,GAAmC;AAAA;AAAA,kCAAQI,OAAR,EAAzD,EAA4E,KAAKhB,OAAL,GAAa;AAAA;AAAA,kCAAQY,SAAR,EAAb,GAAmC;AAAA;AAAA,kCAAQK,OAAR,EAA/G,EAAkI,CAAlI;AACA;AAAA;AAAA,kCAAQ,KAAKlB,OAAL,GAAa,EAAb,GAAkB,KAAKC,OAA/B,EAAwCF,EAAxC,GAA6C,KAAKA,EAAlD;AACA,cAAIoB,EAAE,GAAG;AAAA;AAAA,0CAAgB,CAAC,KAAKnB,OAAN,EAAe,KAAKC,OAApB,CAAhB,EAA8C,KAAKc,GAAnD,EAAwD,CAAC,KAAKK,GAAN,EAAW,KAAKC,KAAhB,EAAuB,KAAKC,IAA5B,CAAxD,CAAT;AACA1B,UAAAA,QAAQ,CAAC2B,IAAT,CAAcJ,EAAd;AACH;;AA1BgC,O,sEAEhCxB,Q;;;;;iBACY,C;;8EAGZA,Q;;;;;iBACa,I;;gFACbA,Q;;;;;iBACe,K;;+EACfA,Q;;;;;iBACc,K;;;AAkBnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Component } from 'cc';\nimport { MapInfo } from './MapInfo';\nimport { matrix1 } from './Square';\nimport { LightSource } from './LightTravel';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = LightSource\n * DateTime = Sun Oct 31 2021 15:32:37 GMT+0800 (中国标准时间)\n * Author = Moonlord\n * FileBasename = LightSource.ts\n * FileBasenameNoExtension = LightSource\n * URL = db://assets/Scripts/LightSource.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n\nexport let LS_array:LightSource[] = new Array<LightSource>();\n \n@ccclass('Light')\nexport class Light extends Component {\n    id:number = 101;\n    @property\n    dir:number = 0;\n    public squarex:number = 0;\n    public squarey:number = 0;\n    @property\n    red:boolean = true;\n    @property\n    green:boolean = false;\n    @property\n    blue:boolean = false;\n\n    onLoad() {\n        let x:number = this.node.getPosition().x;\n        let y:number = this.node.getPosition().y;\n        if(x>=MapInfo.xstart1() && x<=MapInfo.xend1() && y>=MapInfo.ystart1() && y<=MapInfo.yend1()){\n            this.squarex = Math.floor((x - MapInfo.xstart1())/MapInfo.totalsize());\n            this.squarey = Math.floor((y - MapInfo.ystart1())/MapInfo.totalsize());\n        }\n        \n        this.node.setRotationFromEuler(0, 0, this.dir * 45);\n        this.node.setPosition(this.squarex*MapInfo.totalsize() + MapInfo.xshift1(), this.squarey*MapInfo.totalsize() + MapInfo.yshift1(), 0);\n        matrix1[this.squarex*15 + this.squarey].id = this.id;\n        let LS = new LightSource([this.squarex, this.squarey], this.dir, [this.red, this.green, this.blue]);\n        LS_array.push(LS);\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}