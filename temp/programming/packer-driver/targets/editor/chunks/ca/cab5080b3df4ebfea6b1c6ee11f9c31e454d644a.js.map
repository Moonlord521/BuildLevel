{"version":3,"sources":["file:///D:/CocosCreator/BuildLevel/assets/scripts/Square.ts"],"names":["Square","ClearMatrix","i","j","matrix1","id","lightdir","matrix2","GetColor","locate","dir","index1","index2","r","g","b","GetInColor","GetTotalColor","AddColor","color","io","AddQuantumColor","constructor","mirrordir","Array"],"mappings":"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","sourcesContent":["\n/**\n * Predefined variables\n * Name = Square\n * DateTime = Tue Nov 02 2021 17:32:52 GMT+0800 (中國標準時間)\n * Author = XieYe0920\n * FileBasename = Square.ts\n * FileBasenameNoExtension = Square\n * URL = db://assets/scripts/Square.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n\nexport class Square {\n    public id:number;\n    public mirrordir:number;\n    public lightdir:boolean[];\n\n    constructor(){\n        this.id = -1;\n        this.mirrordir = 0;\n        this.lightdir = new Array<boolean>(8*9);\n\n        let i:number;\n        for(i=0; i<8*9; i++) {\n            this.lightdir[i] = false;\n        }\n    }\n}\n\nlet i:number;\nlet matrix1 = new Array<Square>(15*15);\nlet matrix2 = new Array<boolean>(2*12);\n\nfor(i=0; i<15*15; i++) matrix1[i] = new Square();\nfor(i=0; i<2*12; i++) matrix2[i] = false;\nexport {matrix1, matrix2};\n\nexport function ClearMatrix() {\n    let i:number, j:number;\n    for(i=0; i<15*15; i++) {\n        matrix1[i].id = -1;\n        for(j=0; j<8*9; j++) {\n            matrix1[i].lightdir[j] = false;\n        }\n    }\n    for(i=0; i<12*2; i++) {\n        matrix2[i] = false;\n    }\n}\n\nexport function GetColor(locate:number[], dir:number):boolean[] {\n    let index1 = locate[0]*15 + locate[1];\n    let index2 = dir*9;\n\n    let r = matrix1[index1].lightdir[index2];\n    let g = matrix1[index1].lightdir[index2 + 1];\n    let b = matrix1[index1].lightdir[index2 + 2];\n\n    return [r, g, b];\n}\n\nexport function GetInColor(locate:number[], dir:number):boolean[] {\n    let index1 = locate[0]*15 + locate[1];\n    let index2 = dir*9;\n\n    let r = matrix1[index1].lightdir[index2 + 3];\n    let g = matrix1[index1].lightdir[index2 + 4];\n    let b = matrix1[index1].lightdir[index2 + 5];\n\n    return [r, g, b];\n}\n\nexport function GetTotalColor(locate:number[]):boolean[] {\n    let r:boolean = false, g:boolean = false, b:boolean = false;\n    let index1 = locate[0]*15 + locate[1];\n    let dir:number, index2:number;\n\n    for(dir=0; dir<8; dir++) {\n        index2 = dir*9;\n        r ||= (matrix1[index1].lightdir[index2 + 3] || matrix1[index1].lightdir[index2 + 6]);\n        g ||= (matrix1[index1].lightdir[index2 + 4] || matrix1[index1].lightdir[index2 + 7]);\n        b ||= (matrix1[index1].lightdir[index2 + 5] || matrix1[index1].lightdir[index2 + 8]);\n    }\n\n    return [r, g, b];\n}\n\nexport function AddColor(locate:number[], dir:number, color:boolean[], io:boolean) {\n    let index1 = locate[0]*15 + locate[1];\n    let index2 = dir*9;\n\n    matrix1[index1].lightdir[index2] ||= color[0];\n    matrix1[index1].lightdir[index2 + 1] ||= color[1];\n    matrix1[index1].lightdir[index2 + 2] ||= color[2];\n\n    if(io) {\n        matrix1[index1].lightdir[index2 + 3] ||= color[0];\n        matrix1[index1].lightdir[index2 + 4] ||= color[1];\n        matrix1[index1].lightdir[index2 + 5] ||= color[2];\n    }\n}\n\nexport function AddQuantumColor(locate:number[], dir:number, color:boolean[], io:boolean) {\n    let index1 = locate[0]*15 + locate[1];\n    let index2 = dir*9;\n\n    matrix1[index1].lightdir[index2] ||= color[0];\n    matrix1[index1].lightdir[index2 + 1] ||= color[1];\n    matrix1[index1].lightdir[index2 + 2] ||= color[2];\n\n    if(io) {\n        matrix1[index1].lightdir[index2 + 6] ||= color[0];\n        matrix1[index1].lightdir[index2 + 7] ||= color[1];\n        matrix1[index1].lightdir[index2 + 8] ||= color[2];\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}