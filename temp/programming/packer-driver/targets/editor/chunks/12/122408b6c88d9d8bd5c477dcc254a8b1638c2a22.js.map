{"version":3,"sources":["file:///D:/CocosCreator/BuildLevel/assets/scripts/Flower.ts"],"names":["_decorator","Component","Sprite","Color","MapInfo","matrix1","GetTotalColor","ccclass","property","flower_array","Array","Flower","id","squarex","squarey","state","onLoad","x","node","getPosition","y","xstart1","xend1","ystart1","yend1","Math","floor","totalsize","setPosition","xshift1","yshift1","push","ChangeState","r","g","b","red","green","blue","sprite","getComponent","setScale","color"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Sprite, Color} from 'cc';\nimport { MapInfo } from './MapInfo';\nimport { matrix1, GetTotalColor } from './Square';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = Flower\n * DateTime = Sun Oct 31 2021 17:42:46 GMT+0800 (中国标准时间)\n * Author = Moonlord\n * FileBasename = Flower.ts\n * FileBasenameNoExtension = Flower\n * URL = db://assets/Scripts/Flower.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n\nexport let flower_array:Node[] = new Array<Node>();\n\n@ccclass('Flower')\nexport class Flower extends Component {\n    public id:number;\n    public squarex:number = 0;\n    public squarey:number = 0;\n    @property\n    public red:boolean = false;\n    @property\n    public green:boolean = false;\n    @property\n    public blue:boolean = false;\n    public state:boolean = false;\n\n    onLoad() {\n        let x:number = this.node.getPosition().x;\n        let y:number = this.node.getPosition().y;\n        if(x>=MapInfo.xstart1() && x<=MapInfo.xend1() && y>=MapInfo.ystart1() && y<=MapInfo.yend1()){\n            this.squarex = Math.floor((x - MapInfo.xstart1())/MapInfo.totalsize());\n            this.squarey = Math.floor((y - MapInfo.ystart1())/MapInfo.totalsize());\n        }\n        \n        this.id = 0;\n        this.node.setPosition(this.squarex*MapInfo.totalsize() + MapInfo.xshift1(), this.squarey*MapInfo.totalsize() + MapInfo.yshift1(), 0);\n        matrix1[this.squarex*15 + this.squarey].id = this.id;\n        flower_array.push(this.node);\n        this.ChangeState();\n    }\n\n    ChangeState() {\n        let [r, g, b] = GetTotalColor([this.squarex, this.squarey]);\n        if(r == this.red && g == this.green && b == this.blue) {\n            this.state = true;\n        }\n        else {\n            this.state = false;\n        }\n\n        let sprite = this.getComponent(Sprite);\n        if(this.state) {\n            this.node.setScale(1, 1);\n            sprite.color = new Color(this.red ? 255 : 0, this.green ? 255 : 0, this.blue ? 255 : 0, 255);\n        }\n        else {\n            this.node.setScale(0.9, 0.9);\n            if (this.red || this.green || this.blue) {\n                sprite.color = new Color(this.red ? 150 : 0, this.green ? 150 : 0, this.blue ? 150 : 0, 255);\n            }\n            else {\n                sprite.color = new Color(80, 80, 80, 255);\n            }\n        }\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}